maintainers:
  - github: taotieren
    email: admin@taotieren.com
pre_build_script: |
  aur_pre_build(maintainers=['amateurece'])
  add_makedepends(['cmake', 'ninja', 'nlohmann-json', 'pkgconf', 'boost-libs'])
  run_cmd(['curl', '-L', '-o', 'PKGBUILD', 'https://aur.archlinux.org/cgit/aur.git/plain/PKGBUILD?h=sdbusplus-git'])
  run_cmd(['sed', '-i', 's/python setup.py build/python -m build --wheel --no-isolation/', 'PKGBUILD'])
  run_cmd(['sed', '-i', 's|python setup.py install --root="\$pkgdir"|python -m installer --destdir="\$pkgdir" dist/*.whl|', 'PKGBUILD'])
  run_cmd(['updpkgsums'])
post_build: aur_post_build
update_on:
  - source: aur
    aur: sdbusplus-git
  - source: github
    github: openbmc/sdbusplus
  - alias: python
# add_depends([''])
