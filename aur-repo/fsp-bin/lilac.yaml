maintainers:
  - github: taotieren
    email: admin@taotieren.com
# pre_build_script: |
#   update_pkgver_and_pkgrel(_G.newver)

pre_build_script: |
  oldver, oldrel = get_pkgver_and_pkgrel()
  for line in edit_file('PKGBUILD'):
    if line.startswith('_tagname='):
      line = f"_tagname={_G.newver}"
    print(line)
  newver, newrel = get_pkgver_and_pkgrel()
  update_pkgrel(1 if newver != oldver else None)
  run_protected(["updpkgsums"])

post_build_script: |
  git_pkgbuild_commit()
  update_aur_repo()
# repo_depends:
#   -
update_on:
  - source: regex
    url: https://github.com/renesas/fsp/releases/
    regex: 'setup_fsp_v([a-zA-Z0-9_-]+).xz.run'
    # - source: github
    #   github: renesas/fsp
    #   # use_max_tag: true
    #   use_latest_tag: true
    #   # include_regex: ".*e2s*"
    #   # use_max_tag: true
    #   prefix: v
    #   # exclude_regex: '.([\d_]+)'
time_limit_hours: 3
